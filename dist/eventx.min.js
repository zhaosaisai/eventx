/**
 * eventx v1.0.0
 * (c) 2020 zhaosaisai
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).eventx=e()}(this,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}var o;return{Store:function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,n);var o=this.commit,r=this.dispatch,i=this;this.commit=function(t,e){return o.call(i,t,e)},this.dispatch=function(t,e){return r.call(i,t,e)},this._state=e.state||{},this._getters=e.getters||{},this._mutations=e.mutations||{},this._actions=e.actions||{},this._vm=null,this.getters={},this._createVmWatcher(i)}var r,i,s;return r=n,(i=[{key:"commit",value:function(t,e){var n=this._mutations[t];return n?"function"!=typeof n?console.error("mutation type: ".concat(t," shoule be a function")):void n.call(this,this.state,e):console.error("unknown mutation type: ".concat(t))}},{key:"dispatch",value:function(t,e){var n=this,o=this._actions[t];return o?"function"!=typeof o?console.error("dispatch type: ".concat(t," shoule be a function")):Promise.resolve().then((function(){return o.call(n,n,e)})):console.error("unknown dispatch type: ".concat(t))}},{key:"_createVmWatcher",value:function(t){if(t._vm)return t._vm;var e=Object.create(null);Object.keys(t._getters).forEach((function(n){e[n]=function(){return t._getters[n](t.state,t.getters,t)},Object.defineProperty(t.getters,n,{enumerable:!0,get:function(){return t._vm[n]}})})),t._vm=new(o||window.Vue)({data:{$$state:t._state},computed:e})}},{key:"state",get:function(){return this._vm._data.$$state},set:function(t){console.error("You can not set state directly")}}])&&e(r.prototype,i),s&&e(r,s),n}(),install:function(t){!function(t){t.mixin({beforeCreate:n})}(o=t)}}}));
